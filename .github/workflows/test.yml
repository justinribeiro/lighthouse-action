name: PR

on: [pull_request]

jobs:
  perf:
    name: Test action configuration
    runs-on: ubuntu-latest
    needs: build
    steps:
      - uses: actions/checkout@v1
      - name: Generic Default Setup
        uses: ./
        with:
          secret: ${{ secrets.GITHUB_TOKEN }}
          url: https://justinribeiro.com
          wptConnectionSpeed: threegfast
      - name: With Budget.json
        uses: ./
        with:
          secret: ${{ secrets.GITHUB_TOKEN }}
          url: https://justinribeiro.com
          wptConnectionSpeed: threegfast
          lighthouseBudget: .github/test/budget.json
      - name: With custom-config.json
        uses: ./
        with:
          secret: ${{ secrets.GITHUB_TOKEN }}
          url: https://justinribeiro.com
          lighthouseConfiguration: .github/test/custom-config.json
      - name: With everything
        uses: ./
        with:
          secret: ${{ secrets.GITHUB_TOKEN }}
          url: https://justinribeiro.com
          wptConnectionSpeed: threegfast
          lighthouseBudget: .github/test/budget.json
          lighthouseConfiguration: .github/test/custom-config.json
      - name: No URL set
        uses: ./
        with:
          secret: ${{ secrets.GITHUB_TOKEN }}
          wptConnectionSpeed: threegfast
